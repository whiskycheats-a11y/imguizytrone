<div class="relative flex flex-col w-full">

    <!-- HERO SECTION -->
    <section class="relative min-h-screen flex flex-col items-center justify-center overflow-hidden">

        <div class="relative z-10 flex flex-col items-center text-center space-y-10 px-4">

            <!-- Top Tagline -->
            <div class="px-4 py-1.5 bg-red-600/10 border border-red-600/20 rounded-full animate-fade-in-up"
                style="animation-delay: 0.1s;">
                <span class="text-red-600 font-bold tracking-[0.2em] uppercase text-[10px] md:text-xs">
                    New Update v2.4.1 // Protocol: Optimized
                </span>
            </div>

            <!-- Massive Typography with Scan Effect -->
            <div class="relative w-full flex flex-col items-center justify-center animate-fade-in-up"
                style="animation-delay: 0.2s;">
                <h1 id="scramble-title"
                    class="font-black text-[clamp(4rem,15vw,13rem)] leading-none tracking-tighter text-white flex items-center justify-center filter drop-shadow-[0_0_50px_rgba(255,255,255,0.1)] relative group">
                    <span class="falling-char inline-block hover:text-red-600 transition-colors duration-300 cursor-default" style="--delay: 0s;">N</span>
                    <span class="inline-block w-[0.2em]"></span>
                    <span class="falling-char inline-block hover:text-red-600 transition-colors duration-300 cursor-default" style="--delay: 0.1s;">C</span>
                    <span class="falling-char inline-block hover:text-red-600 transition-colors duration-300 cursor-default" style="--delay: 0.2s;">O</span>
                    <span class="falling-char inline-block hover:text-red-600 transition-colors duration-300 cursor-default" style="--delay: 0.3s;">R</span>
                    <span class="falling-char inline-block hover:text-red-600 transition-colors duration-300 cursor-default" style="--delay: 0.4s;">P</span>
                    
                    <!-- Floating Glow Behind Title -->
                    <div class="absolute inset-0 -z-10 bg-red-600/20 blur-[120px] rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                </h1>
            </div>

            <!-- Subtext -->
            <p class="text-gray-400 max-w-2xl text-base md:text-xl font-light tracking-[0.15em] animate-fade-in-up leading-relaxed"
                style="animation-delay: 0.4s;">
                THE APEX OF <span class="text-white font-bold text-shimmer">DIGITAL DOMINANCE</span>.
                <br>
                ENGINEERED FOR CHAMPIONS WHO DEMAND PRECISION.
            </p>

            <!-- CTA Buttons -->
            <div class="flex flex-col md:flex-row gap-6 mt-12 animate-fade-in-up" style="animation-delay: 0.5s;">
                <a href="https://discord.gg/n-corp" target="_blank"
                    class="group relative px-14 py-5 bg-red-600/10 border border-red-600/50 text-red-500 font-black uppercase tracking-[0.3em] overflow-hidden rounded hover:bg-red-600 hover:text-black transition-all duration-500 shadow-[0_0_30px_rgba(220,38,38,0.2)] hover:shadow-[0_0_50px_rgba(220,38,38,0.5)]">
                    <span class="flex items-center gap-3 relative z-10">
                        Join the Syndicate
                    </span>
                </a>

                <a href="#explore"
                    class="group px-14 py-5 bg-white text-black font-black uppercase tracking-[0.3em] rounded hover:bg-gray-200 transition-all duration-300 shadow-[0_0_30px_rgba(255,255,255,0.1)]">
                    View Systems
                </a>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="absolute bottom-10 animate-bounce opacity-30">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 14l-7 7m0 0l-7-7m7 7V3">
                </path>
            </svg>
        </div>
    </section>

    <!-- PREMIUM PRODUCTS STACK -->
    <section class="py-32 relative overflow-hidden">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <div class="mb-24">
                <h2 class="text-4xl md:text-6xl font-black uppercase tracking-tighter text-white mb-4 glitch-hover" data-text="PREMIUM CHEATS">
                    PREMIUM <span class="text-red-600 drop-shadow-[0_0_15px_rgba(220,38,38,0.5)]">CHEATS</span>
                </h2>
                <div class="w-24 h-1 bg-red-600 mx-auto rounded-full"></div>
                <p class="text-gray-400 mt-8 max-w-xl mx-auto text-lg">
                    Experience the gold standard of performance. Curated for quality, speed, and reliability.
                </p>
            </div>

            <!-- 3D Card Stack Container -->
            <div class="relative min-h-[820px] w-full flex items-start justify-center stack-container mt-12 pb-24">
                <!-- Stack Wrapper -->
                <div id="product-stack" class="relative w-full max-w-2xl min-h-[720px] perspective-[2000px]">

                    <!-- Card 1: UID BYPASS FREE -->
                    <div class="product-card stack-active" data-index="0">
                        <div class="product-card-inner">
                            <div class="card-bg-wrap">
                                <img src="https://i.ibb.co/Vp8nFmP/image-1770542156555.png"
                                    class="card-bg" alt="UID Bypass Free">
                            </div>
                            <div class="card-content">
                            <div class="mb-4">
                                <span class="badge border border-white/20 bg-white/5">Starter Pack</span>
                            </div>
                            <h3 class="card-title text-3xl md:text-5xl">UID BYPASS FREE</h3>
                            <p class="card-desc text-sm md:text-base">Essential protection for casual players. Light and
                                efficient.</p>
                            <div class="card-footer">
                                <div class="card-price">FREE <span
                                        class="text-xs uppercase tracking-widest text-white/40">/ always</span></div>
                                <div class="card-next-btn">
                                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                            d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>

                    <!-- Card 2: EXTERNAL -->
                    <div class="product-card stack-middle" data-index="1">
                        <div class="product-card-inner">
                            <div class="card-bg-wrap">
                                <img src="https://images.unsplash.com/photo-1563986768609-322da13575f3?auto=format&fit=crop&q=80&w=2070"
                                    class="card-bg" alt="External">
                            </div>
                            <div class="card-content">
                            <div class="mb-4">
                                <span class="badge">Safe Kernel</span>
                            </div>
                            <h3 class="card-title text-3xl md:text-5xl">EXTERNAL</h3>
                            <p class="card-desc text-sm md:text-base">Kernel-based external engine for maximum account
                                safety.</p>
                            <div class="card-footer">
                                <div class="card-price">$29.99 <span>/ month</span></div>
                                <div class="card-next-btn">
                                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                            d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>

                    <!-- Card 3: INTERNAL -->
                    <div class="product-card stack-back" data-index="2">
                        <div class="product-card-inner">
                            <div class="card-bg-wrap">
                                <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&q=80&w=2070"
                                    class="card-bg" alt="Internal">
                            </div>
                            <div class="card-content">
                            <div class="mb-4">
                                <span class="badge">Unmatched Power</span>
                            </div>
                            <h3 class="card-title text-3xl md:text-5xl">INTERNAL</h3>
                            <p class="card-desc text-sm md:text-base">Fully injected internal modules with high-speed
                                memory hacks.</p>
                            <div class="card-footer">
                                <div class="card-price">$49.99 <span>/ lifetime</span></div>
                                <div class="card-next-btn">
                                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                            d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>

                    <!-- Card 4: AIMKILL -->
                    <div class="product-card stack-back" data-index="3">
                        <div class="product-card-inner">
                            <div class="card-bg-wrap">
                                <img src="https://images.unsplash.com/photo-1627161684458-a62da129efcd?auto=format&fit=crop&q=80&w=2070"
                                    class="card-bg" alt="Aimkill">
                            </div>
                            <div class="card-content">
                            <div class="mb-4">
                                <span class="badge bg-white text-black">Rage Mode</span>
                            </div>
                            <h3 class="card-title text-3xl md:text-5xl">AIMKILL</h3>
                            <p class="card-desc text-sm md:text-base">Dominance redefined. Aggressive aimbots for
                                absolute control.</p>
                            <div class="card-footer">
                                <div class="card-price">$69.99 <span>/ month</span></div>
                                <div class="card-next-btn">
                                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                                            d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CTA Button -->
        <div class="mt-16 mb-8 flex justify-center">
            <a href="/products"
                class="inline-flex items-center gap-4 px-10 py-5 bg-red-600 text-white font-black uppercase tracking-widest rounded-full hover:bg-red-700 hover:scale-105 active:scale-95 transition-all duration-300 shadow-[0_20px_50px_rgba(220,38,38,0.3)] group">
                Explore Full Store
                <svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M17 8l4 4m0 0l-4 4m4-4H3">
                    </path>
                </svg>
            </a>
        </div>
</div>
</section>

<!-- FEATURES BENTO GRID -->
<section id="explore" class="relative py-32 px-6 overflow-hidden">
    <div class="max-w-7xl mx-auto relative z-10">
        <div class="text-center mb-24">
            <h2 class="text-4xl md:text-6xl font-black text-white mb-6">UNRIVALED <span
                    class="text-shimmer">TECHNOLOGY</span></h2>
            <div class="h-[2px] w-32 bg-red-600 mx-auto opacity-50 shadow-[0_0_15px_rgba(220,38,38,1)]"></div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-6 md:grid-rows-2 gap-4 h-auto md:h-[600px]">
            <!-- Bento Item 1 (Large) -->
            <div
                class="md:col-span-3 md:row-span-2 glass-card p-12 rounded-2xl flex flex-col justify-end group will-change-transform overflow-hidden relative">
                <div class="border-beam"></div>
                <div
                    class="w-20 h-20 bg-red-600/20 rounded-2xl mb-8 flex items-center justify-center border border-red-600/30 group-hover:scale-110 transition-transform duration-500">
                    <svg class="w-10 h-10 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                        </path>
                    </svg>
                </div>
                <h3 class="text-4xl font-black text-white mb-4">GHOST PROTOCOL</h3>
                <p class="text-gray-400 text-lg leading-relaxed max-w-sm">Advanced kernel-level masking technology
                    ensures you remain completely invisible to all anti-tamper systems. Zero detection history since
                    inception.</p>
            </div>

            <!-- Bento Item 2 -->
            <div
                class="md:col-span-3 glass-card p-10 rounded-2xl flex items-center gap-8 group will-change-transform overflow-hidden relative">
                <div class="border-beam"></div>
                <div
                    class="w-16 h-16 bg-red-600/20 rounded-xl flex-shrink-0 flex items-center justify-center border border-red-600/30">
                    <svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                </div>
                <div>
                    <h3 class="text-2xl font-black text-white mb-2 uppercase">Zero Latency</h3>
                    <p class="text-gray-400">Optimized assembly injection and lightweight rendering.</p>
                </div>
            </div>

            <!-- Bento Item 3 -->
            <div
                class="md:col-span-3 glass-card p-10 rounded-2xl flex items-center gap-8 group will-change-transform overflow-hidden relative">
                <div class="border-beam"></div>
                <div
                    class="w-16 h-16 bg-red-600/20 rounded-xl flex-shrink-0 flex items-center justify-center border border-red-600/30">
                    <svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
                        </path>
                    </svg>
                </div>
                <div>
                    <h3 class="text-2xl font-black text-white mb-2 uppercase">Cloud SYNC</h3>
                    <p class="text-gray-400">Military-grade encryption for all your configuration presets.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- STATS / GLOW BAR -->
<section class="py-20 relative border-y border-white/5 bg-white/5 backdrop-blur-sm">
    <div class="max-w-7xl mx-auto px-6 grid grid-cols-2 md:grid-cols-4 gap-12 text-center">
        <div>
            <div class="text-4xl md:text-5xl font-black text-white mb-2 counter" data-target="15000">15,000+</div>
            <div class="text-red-600 font-bold tracking-widest uppercase text-xs">Active Operatives</div>
        </div>
        <div>
            <div class="text-4xl md:text-5xl font-black text-white mb-2">99.9%</div>
            <div class="text-red-500 font-bold tracking-widest uppercase text-xs">Uptime Guarantee</div>
        </div>
        <div>
            <div class="text-4xl md:text-5xl font-black text-white mb-2">24/7</div>
            <div class="text-red-500 font-bold tracking-widest uppercase text-xs">Support Channel</div>
        </div>
        <div>
            <div class="text-4xl md:text-5xl font-black text-white mb-2">0</div>
            <div class="text-red-500 font-bold tracking-widest uppercase text-xs">Detections</div>
        </div>
    </div>
</section>

<!-- FINAL CTA -->
<section class="py-32 relative overflow-hidden flex items-center justify-center">
    <div class="absolute inset-0 bg-red-600/5 z-0"></div>
    <div class="absolute w-[500px] h-[500px] bg-red-600/10 rounded-full blur-[100px] z-0 animate-pulse-glow">
    </div>

    <div class="relative z-10 text-center max-w-4xl px-6">
        <h2 class="text-4xl md:text-7xl font-black text-white mb-8 tracking-tight">READY TO <span
                class="text-red-600">DOMINATE?</span></h2>
        <p class="text-gray-400 text-xl mb-12 max-w-2xl mx-auto">Join thousands of elite players who have already
            unlocked their true potential. Secure your access today.</p>

        <a href="/products"
            class="inline-block relative px-16 py-6 bg-red-600 text-white font-black text-xl uppercase tracking-widest overflow-hidden rounded hover:bg-red-500 hover:scale-105 transition-all duration-300 shadow-[0_0_40px_rgba(220,38,38,0.4)]">
            Get Started Now
        </a>
    </div>
</section>

</div>

<style>
    .falling-char {
        display: inline-block;
        opacity: 0;
        transform: translateY(-80px) scale(0.9);
        filter: blur(10px);
        animation: fall-reveal 1.2s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        animation-delay: var(--delay);
        will-change: transform, opacity, filter;
    }

    @keyframes fall-reveal {
        0% {
            opacity: 0;
            transform: translateY(-80px) rotateX(-45deg) scale(0.8);
            filter: blur(15px);
        }

        100% {
            opacity: 1;
            transform: translateY(0) rotateX(0) scale(1);
            filter: blur(0px);
        }
    }

    /* CARD STACK SYSTEM - 3D (larger cards) */
    .product-card {
        position: absolute;
        top: 0;
        left: 50%;
        width: 100%;
        max-width: 600px;
        height: 440px;
        border-radius: 2rem;
        overflow: visible;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        box-shadow: 0 25px 60px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(220, 38, 38, 0.08);
        background: #0a0a0a;
        border: 1px solid rgba(220, 38, 38, 0.15);
        transform-origin: center top;
        perspective: 1200px;
    }

    .product-card::before {
        content: '';
        position: absolute;
        inset: -2px;
        background: linear-gradient(45deg, transparent, rgba(220, 38, 38, 0.3), transparent);
        border-radius: inherit;
        z-index: -1;
        opacity: 0;
        transition: opacity 0.5s;
    }

    .product-card.stack-active::before {
        opacity: 1;
        animation: card-glow 3s linear infinite;
    }

    @keyframes card-glow {
        0% { filter: hue-rotate(0deg); }
        100% { filter: hue-rotate(360deg); }
    }

    .product-card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        border-radius: 2rem;
        overflow: hidden;
        transform-style: preserve-3d;
        transition: transform 0.15s ease-out;
    }

    .card-bg-wrap {
        position: absolute;
        inset: 0;
        overflow: hidden;
        transform-style: preserve-3d;
    }

    .card-bg {
        position: absolute;
        width: 120%;
        height: 120%;
        left: -10%;
        top: -10%;
        object-fit: cover;
        opacity: 0.35;
        transition: transform 0.5s ease;
        will-change: transform;
    }

    .product-card.stack-active .card-bg {
        opacity: 0.6;
        animation: bg-pulse 10s ease-in-out infinite alternate;
    }

    @keyframes bg-pulse {
        0% { transform: scale(1) rotate(0deg); }
        100% { transform: scale(1.1) rotate(1deg); }
    }

    .card-content {
        position: absolute;
        inset: 0;
        background: linear-gradient(to top, rgba(0,0,0,1) 10%, rgba(0,0,0,0.4) 50%, transparent 100%);
        padding: 3rem;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        text-align: left;
        transform: translateZ(24px);
        transform-style: preserve-3d;
    }

    .badge {
        background: #dc2626;
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 10px;
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        box-shadow: 0 0 15px rgba(220, 38, 38, 0.4);
    }

    .card-title {
        color: white;
        font-family: 'Black', sans-serif;
        font-weight: 900;
        font-size: clamp(2rem, 4vw, 3.25rem);
        text-transform: uppercase;
        margin-bottom: 0.5rem;
        text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }

    .card-desc {
        color: #d1d5db;
        font-size: 1rem;
        margin-bottom: 1.5rem;
        max-width: 420px;
        line-height: 1.5;
    }

    .card-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-top: 1px solid rgba(255,255,255,0.1);
        padding-top: 1.5rem;
    }

    .card-price {
        color: white;
        font-size: 1.75rem;
        font-weight: 900;
        display: flex;
        flex-direction: column;
    }

    .card-price span {
        font-size: 0.75rem;
        color: #9ca3af;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .card-next-btn {
        width: 3.5rem;
        height: 3.5rem;
        border-radius: 50%;
        background: #dc2626;
        border: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        box-shadow: 0 0 20px rgba(220, 38, 38, 0.4);
    }

    /* STACK POSITIONS */
    .stack-active {
        z-index: 30;
        transform: translateX(-50%) translateY(0) scale(1) rotate(0deg);
        opacity: 1;
        filter: blur(0);
    }

    .stack-middle {
        z-index: 20;
        transform: translateX(-50%) translateY(60px) scale(0.92) rotate(-1deg);
        opacity: 0.8;
        filter: blur(1px);
    }

    .stack-back {
        z-index: 10;
        transform: translateX(-50%) translateY(120px) scale(0.85) rotate(-2deg);
        opacity: 0.5;
        filter: blur(3px);
    }

    .stack-exit {
        z-index: 40;
        transform: translateX(150%) translateY(-100px) rotate(30deg) scale(0.8);
        opacity: 0;
        filter: blur(15px);
        pointer-events: none;
    }

    .product-card.stack-active:hover {
        transform: translateX(-50%) translateY(-10px) scale(1.02);
        box-shadow: 0 40px 80px rgba(0, 0, 0, 0.8), 0 0 50px rgba(220, 38, 38, 0.2);
    }

    .product-card:hover .card-next-btn {
        transform: rotate(90deg) scale(1.1);
        background: #ef4444;
    }
</style>

<script>
    $(document).ready(function () {
        // Title Scramble (Trigger after fall)
        const el = document.getElementById('scramble-title');
        if (el) {
            const fx = new TextScramble(el);
            setTimeout(() => {
                fx.setText('N CORP');
            }, 2000); // Wait for the falling animation to mostly complete
        }
        // GPU acceleration class
        $('.glass-card').addClass('transition-transform duration-300');

        // PRODUCT SHUFFLE LOGIC
        const cards = $('.product-card');
        let currentIndex = 0;
        let shuffleInterval;

        function shuffleCards() {
            const currentCard = cards.eq(currentIndex);
            
            // Remove all classes first
            cards.removeClass('stack-active stack-middle stack-back stack-exit');

            // 1. Exit current active card (Fly out)
            currentCard.addClass('stack-exit');

            currentIndex = (currentIndex + 1) % cards.length;
            const middleIndex = currentIndex;
            const backIndex = (currentIndex + 1) % cards.length;
            const hiddenIndex = (currentIndex + 2) % cards.length;

            // 2. Set new positions
            cards.eq(middleIndex).addClass('stack-active');
            cards.eq(backIndex).addClass('stack-middle');
            cards.eq(hiddenIndex).addClass('stack-back');

            // Update currentIndex for the next shuffle
            // currentIndex = middleIndex; // Already set above

            // Reset the exited card classes after animation
            setTimeout(() => {
                currentCard.removeClass('stack-exit');
                if (!currentCard.hasClass('stack-active') && !currentCard.hasClass('stack-middle')) {
                    currentCard.addClass('stack-back');
                }
            }, 800);
        }

        // Auto Shuffle – cards automatically change every 5 seconds
        function startAutoShuffle() {
            stopAutoShuffle();
            shuffleInterval = setInterval(shuffleCards, 5000);
        }

        function stopAutoShuffle() {
            if (shuffleInterval) clearInterval(shuffleInterval);
        }

        // Click Trigger – click card to go to next immediately
        $('.product-card').click(function () {
            shuffleCards();
            startAutoShuffle(); // Reset timer on manual click
        });

        // Pause on hover
        $('#product-stack').on('mouseenter', stopAutoShuffle).on('mouseleave', startAutoShuffle);

        // Start initial timer
        startAutoShuffle();
    });

        // 3D Tilt + Image Parallax on active product card (mouse follow, image moves with depth)
        let cardTiltFrame;
        $('.product-card').on('mousemove', function (e) {
            if (!$(this).hasClass('stack-active')) return;
            const card = $(this);
            const inner = card.find('.product-card-inner')[0];
            const bg = card.find('.card-bg')[0];
            if (!inner || !bg) return;
            const rect = this.getBoundingClientRect();
            const x = (e.clientX - rect.left) / rect.width;
            const y = (e.clientY - rect.top) / rect.height;
            const centerX = 0.5, centerY = 0.5;
            const rotateX = (y - centerY) * -12;
            const rotateY = (x - centerX) * 12;
            const imgMoveX = (centerX - x) * 10;
            const imgMoveY = (centerY - y) * 10;
            if (cardTiltFrame) cancelAnimationFrame(cardTiltFrame);
            cardTiltFrame = requestAnimationFrame(function () {
                inner.style.transform = 'rotateX(' + rotateX + 'deg) rotateY(' + rotateY + 'deg) scale3d(1.02, 1.02, 1.02)';
                bg.style.transform = 'scale(1.12) translate(' + imgMoveX + 'px, ' + imgMoveY + 'px)';
            });
        }).on('mouseleave', function () {
            const card = $(this);
            const inner = card.find('.product-card-inner')[0];
            const bg = card.find('.card-bg')[0];
            if (inner) inner.style.transform = '';
            if (bg) bg.style.transform = '';
        });

        // Magnetic Buttons
        $('.group.relative, button').on('mousemove', function (e) {
            const btn = $(this);
            const rect = this.getBoundingClientRect();
            const x = e.clientX - rect.left - rect.width / 2;
            const y = e.clientY - rect.top - rect.height / 2;

            requestAnimationFrame(() => {
                btn.css('transform', `translate(${x * 0.2}px, ${y * 0.2}px) scale(1.02)`);
            });
        }).on('mouseleave', function () {
            $(this).css('transform', 'translate(0, 0) scale(1)');
        });

        // Optimized 3D Tilt Effect for cards using requestAnimationFrame
        let tiltFrame;
        $('.glass-card').on('mousemove', function (e) {
            const card = $(this);
            const cardOffset = card.offset();
            const mouseX = e.pageX - cardOffset.left;
            const mouseY = e.pageY - cardOffset.top;

            const centerX = card.width() / 2;
            const centerY = card.height() / 2;

            const rotateX = (mouseY - centerY) / 25; // Gentler tilt
            const rotateY = (centerX - mouseX) / 25;

            if (tiltFrame) cancelAnimationFrame(tiltFrame);

            tiltFrame = requestAnimationFrame(() => {
                card.css('transform', `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`);
            });
        });

        $('.glass-card').on('mouseleave', function () {
            if (tiltFrame) cancelAnimationFrame(tiltFrame);
            $(this).css('transform', 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)');
        });

        // Optimized Scroll Reveal
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px' // Start a bit earlier
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    requestAnimationFrame(() => {
                        entry.target.style.opacity = '1';
                        entry.target.classList.add('animate-fade-in-up');
                    });
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        $('.glass-card, .counter').each(function () {
            this.style.opacity = '0';
            observer.observe(this);
        });

        // Smooth counter animation
        $('.counter').each(function () {
            const $this = $(this);
            const target = parseInt($this.data('target'));
            let current = 0;
            const duration = 2000;
            const startTime = performance.now();

            const updateCounter = (currentTime) => {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);

                // OutQuad easing for smoothness
                const easeProgress = 1 - (1 - progress) * (1 - progress);
                current = Math.ceil(easeProgress * target);

                $this.text(current.toLocaleString() + (target === 15000 ? '+' : ''));

                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                }
            };

            const countObserver = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting) {
                    requestAnimationFrame(updateCounter);
                    countObserver.unobserve(this);
                }
            });
            countObserver.observe(this);
        });
    });
</script>